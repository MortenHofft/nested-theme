{% assign posts = site.posts %}
{% if page.lang %}
  {% assign posts = posts | where: "lang", page.lang %}
{% endif %}

{% unless site.algae.latestPostLimit or jekyll.environment == "production" %}
<script>
themeFeedback.push({title: "Number of latest posts", description: "You haven't configured how many posts should show. To do so add <code>algae.latestPostLimit: 3</code> to <code>_config.yml</code>."})
</script>
{% endunless %}

{% assign postLimit = site.algae.latestPostLimit |Â default: 3 %}

{%- if postLimit > 0 and posts.size > 0 -%}
<section class="features">
  <div class="feature-cards has-{{ posts.size }}-elements">
    {% for post in posts limit: postLimit %}
      <article class="feature" data-categories="{% for category in post.categories %}{{ category | strip }}|{% endfor %}">
      {% assign description = post.excerpt | truncatewords: 20  %}
      {% assign date = post.date | date: "%B %d, %Y"  %}
      {% assign url = post.url | relative_url  %}
        {% include blocks/feature.html content=post description=description preTitle=date url=url %}
      </article>
    {% endfor %}
  </div>
</section>
{%- endif -%}
